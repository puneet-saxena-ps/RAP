sap.ui.define(["com/public/storage/pao/utils/reusecontroller","sap/m/BusyDialog","sap/m/MessageToast","sap/ui/core/Fragment","sap/ui/model/json/JSONModel","com/public/storage/pao/utils/formatter","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/u+
i/model/FilterType"],function(e,t,n,o,i,a,l,s,r){"use strict";var g;return e.extend("com.public.storage.pao.controller.TaxDetails",{formatter:a,onInit:function(){g=this;const e=this.getRouter();e.getRoute("taxDetails").attachMatched(this._onRouteMatched,+
this);this._oBusyDialog=new t;this.getView().addDependent(this._oBusyDialog);this.model=new i;this.model.setData({TaxOwner:"None",TaxOwnerFein:"None",LegalOwner:"None",LegalOwnerFein:"None",OwnerOfRecord:"None",solarEntity:"None"});this.getView().setMode+
l(this.model)},_onRouteMatched:function(e){const t=this.getRouter();this.getOwnerComponent.hasChanges=false;const n=this.getOwnerComponent().plant;if(n===undefined){return t.navTo("home")}const o=this.getOwnerComponent().LegacyPropertyNumber;this._oModel+
=sap.ui.getCore().getModel("mainModel");this.readPropertyData(n,o);this.readTaxOwner();this.readLegalOwner()},onValueHelpDialogSearchTaxOwner:function(e){let t=e.getParameter("value");let n=new l("Description",s.Contains,t);let o=new l("Code",s.Contains,+
t);let i=new l({filters:[n,o],and:false});e.getSource().getBinding("items").filter([i])},onValueHelpDialogSearchLegalOwner:function(e){let t=e.getParameter("value");let n=new l("Description",s.Contains,t);let o=new l("Code",s.Contains,t);let i=new l({fil+
ters:[n,o],and:false});e.getSource().getBinding("items").filter([i])},onValueHelpDialogSearchSolarENtity:function(e){let t=e.getParameter("value");let n=new l("Description",s.Contains,t);let o=new l("Company",s.Contains,t);let i=new l({filters:[n,o],and:+
false});e.getSource().getBinding("items").filter([i])},_onValueHelpTaxOwner:function(e){this.getOwnerComponent.hasChanges=true;this.selectedField=e.getSource().getCustomData()[0].getValue();const t=this;const n=this.getView();if(!this._pValueHelpTaxOwner+
){this._pValueHelpTaxOwner=o.load({id:n.getId(),name:"com.public.storage.pao.fragments.TaxDetails.TaxOwner",controller:this}).then(function(e){n.addDependent(e);return e})}this._oBusyDialog.open();this._pValueHelpTaxOwner.then(function(e){t._oBusyDialog.+
close();e.open()})},_onValueHelpTaxOwnerFein:function(e){const t=this;const n=this.getView();if(!this._pValueHelpTaxOwnerFein){this._pValueHelpTaxOwnerFein=o.load({id:n.getId(),name:"com.public.storage.pao.fragments.TaxDetails.TaxOwnerFein",controller:th+
is}).then(function(e){n.addDependent(e);return e})}this._pValueHelpTaxOwnerFein.then(function(e){e.open()})},_onValueHelpLegalOwner:function(e){this.getOwnerComponent.hasChanges=true;const t=this;const n=this.getView();if(!this._pValueHelpLegalOwner){thi+
s._pValueHelpLegalOwner=o.load({id:n.getId(),name:"com.public.storage.pao.fragments.TaxDetails.LegalOwner",controller:this}).then(function(e){n.addDependent(e);return e})}this._oBusyDialog.open();this._pValueHelpLegalOwner.then(function(e){t._oBusyDialog+
.close();e.open()})},_onValueHelpLegalOwnerFein:function(e){const t=this;const n=this.getView();if(!this._pValueHelpLegalOwnerFein){this._pValueHelpLegalOwnerFein=o.load({id:n.getId(),name:"com.public.storage.pao.fragments.TaxDetails.LegalOwnerFein",cont+
roller:this}).then(function(e){n.addDependent(e);return e})}this._oBusyDialog.open();this._pValueHelpLegalOwnerFein.then(function(e){t._oBusyDialog.close();e.open()})},_onValueHelOwnerRecord:function(e){const t=this;const n=this.getView();if(!this._pValu+
eHelpOwnerRecord){this._pValueHelpOwnerRecord=o.load({id:n.getId(),name:"com.public.storage.pao.fragments.TaxDetails.OwnerofRecord",controller:this}).then(function(e){n.addDependent(e);return e})}this._oBusyDialog.open();this._pValueHelpOwnerRecord.then(+
function(e){t._oBusyDialog.close();e.open()})},_onValueHelpTaxFillingEntity:function(e){const t=this;const n=this.getView();if(!this._pValueHelpTaxFillingEntity){this._pValueHelpTaxFillingEntity=o.load({id:n.getId(),name:"com.public.storage.pao.fragments+
.TaxDetails.TaxFillingEntity",controller:this}).then(function(e){n.addDependent(e);return e})}this._oBusyDialog.open();this._pValueHelpTaxFillingEntity.then(function(e){t._oBusyDialog.close();e.open()})},onDetectChange:function(e){this.detectChanges()},o+
nValueHelpDialogClose:function(e){let t=e.getParameter("selectedItem");let n=e.getSource().getTitle();if(!t){return}let o=t.getDescription();let i=t.getTitle();let a=t.getInfo();if(n==="Tax Owner"&&this.selectedField==="taxOwner"){this.getView().getModel+
("plantBasicDetailsModel").setProperty("/TaxOwner",`(${i}) ${o}`)}if(n==="Legal Owner"){this.getView().getModel("plantBasicDetailsModel").setProperty("/LegalOwner",`(${i}) ${o}`)}if(this.selectedField==="sentity"&&n==="Tax Owner"){this.getView().getModel+
("plantBasicDetailsModel").setProperty("/SolarEntity",`(${i}) ${o}`)}},onPressSaveTaxDetails:function(){const e=this;this._oBusyDialog.open();const t=this.getOwnerComponent().plant;const o=this.getOwnerComponent().LegacyPropertyNumber;const i=this.byId("+
taxOwner").getValue();const a=this.byId("taxOwnerFein").getValue();const l=this.byId("legalOwner").getValue();const s=this.byId("legalOwnerFein").getValue();const r=this.byId("ownerRecord").getValue();const g=this.byId("solarenitity").getValue();const u=+
{TaxOwner:i,TaxOwnerFein:a,LegalOwner:l,LegalOwnerFein:s,OwnerOfRecord:r,SolarEntity:g};const c=`/PropertyMasterSet(Plant='${t}',LegacyPropertyNumber='${o}')`;this._oModel.update(c,u,{success:function(t){e._oBusyDialog.close();e.getOwnerComponent.hasChan+
ges=false;n.show("Saved Successfully")},error:function(t){e._oBusyDialog.close();n.show("Something went wrong with Service")}})}})});                                                                                                                          
//# sourceMappingURL=TaxDetails.controller.js.map                                                                                                                                                                                                              