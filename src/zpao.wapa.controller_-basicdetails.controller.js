sap.ui.define(["com/public/storage/pao/utils/reusecontroller","sap/m/BusyDialog","sap/m/MessageToast","sap/ui/model/json/JSONModel","com/public/storage/pao/utils/formatter","sap/ui/core/Fragment","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/u+
i/model/FilterType"],function(e,t,o,s,r,i,n,a,l){"use strict";var u;return e.extend("com.public.storage.pao.controller.BasicDetails",{formatter:r,onInit:function(){u=this;const e=this.getRouter();e.getRoute("basicDetails").attachMatched(this._onRouteMatc+
hed,this);this._oBusyDialog=new t;this.getView().addDependent(this._oBusyDialog);this.model=new s;this.model.setData({publishedPhoneNo:"None",tollFreeNumber:"None",localPhoneNumber:"None",network1IpAddress:"None",network2IpAddress:"None",KioskActiveDate:+
"None",KioskProperty:"None",GeoCode:"None"});this.getView().setModel(this.model)},_onRouteMatched:function(e){const t=this.getRouter();this.getOwnerComponent.hasChanges=false;const o=this.getOwnerComponent().plant;if(o===undefined){return t.navTo("home")+
}const s=this.getOwnerComponent().LegacyPropertyNumber;this._oModel=sap.ui.getCore().getModel("mainModel");this.readPropertyData(o,s);this.readPlantData(o)},onDetectChange:function(e){this.detectChanges()},readPlantData:function(e){const t=this;const r=`+
/PlantMasterSet`;this._oBusyDialog.open();this._oModel.read(r,{success:function(o){t._oBusyDialog.close();const r=new s(o.results);const i=r.getData().filter(t=>t.Werks===e);t.getOwnerComponent().getModel("plantsModel").setProperty("/Address",i[0].Addres+
s);t.getOwnerComponent().getModel("plantsModel").setProperty("/Email",i[0].Email);t.getOwnerComponent().getModel("plantsModel").setProperty("/Faxnumber",i[0].Faxnumber);t.getOwnerComponent().getModel("plantsModel").setProperty("/Telnumber",i[0].Telnumber+
)},error:function(e){t._oBusyDialog.close();o.show("Something went wrong with Service")}})},_onValueHelpRequestProperty:function(e){this.getOwnerComponent.hasChanges=true;const t=this;var o=e.getSource().getValue(),s=this.getView();if(!this._pValueHelpDi+
alogProp){this._pValueHelpDialogProp=i.load({id:s.getId(),name:"com.public.storage.pao.fragments.BasicDetails.Property",controller:this}).then(function(e){s.addDependent(e);return e})}this._oBusyDialog.open();this._pValueHelpDialogProp.then(function(e){t+
.readPropertyMasterBuddyData();t._oBusyDialog.close();e.open(o)})},onValueHelpDialogSearchProperty:function(e){var t=e.getParameter("value");var o=new n("Werks",a.Contains,t);e.getSource().getBinding("items").filter([o])},onValueHelpDialogConfirmProperty+
:function(e){let t=e.getParameter("selectedItem");let o=t.getBindingContext("plantsBuddyModel").getObject().Name2;this.getView().byId("budProp").setValue(o)},readPropertyMasterBuddyData:function(){const e=this;this._oBusyDialog.open();return new Promise(+
function(){e._oModel.read(`/PlantMasterSet`,{success:function(t){e._oBusyDialog.close();const o=new s(t.results);e.getOwnerComponent().setModel(o,"plantsBuddyModel");sap.ui.getCore().setModel(o,"plantsBuddyModel")},error:function(t){e._oBusyDialog.close(+
);o.show("Something went wrong with Service")}})})},onPressSaveBasicDetails:function(){this._oBusyDialog.open();const e=this;const t=this.getOwnerComponent().plant;const s=this.getOwnerComponent().LegacyPropertyNumber;var r=true;let i="T00:00:00";let n=t+
his.getView().byId("kiskProp").getSelectedKey();let a=this.getView().byId("kisok").getValue().split(".").reverse().join("-");let l=this.getView().byId("geo").getValue();if(a!==""){let e=sap.ui.core.format.DateFormat.getDateInstance({pattern:"yyyy-MM-dd"}+
).format(new Date(a))+i;a=e==="T00:00:00"?null:e}else{a=null}if(n==="Y"&&(a===""||a==null)){this._oBusyDialog.close();return o.show("Kiosk Active Date cannot be blank")}else{}if(n===""){this.model.setProperty("/KioskProperty","Error")}else{this.model.set+
Property("/KioskProperty","None")}if(l===""){this.model.setProperty("/GeoCode","Error")}else{this.model.setProperty("/GeoCode","None")}if(l===""||n===""){r=true}else{r=false}if(r===false){const r={KioskActiveDate:a,KioskProperty:n,BuddyPropertyNumber:thi+
s.getView().byId("budProp").getValue(),RetailStoreSquareFootage:this.getView().byId("retailStoreSq").getValue(),HistoricalProperty:this.getView().byId("histProp").getValue(),PsaProperty:this.getView().byId("psaProp").getValue(),TransferFrom:this.getView(+
).byId("transF").getValue(),PropertyEmailAddress:this.getView().byId("email").getValue(),OfficeSquareFootage:this.getView().byId("offSq").getValue(),RetailStorageSize:this.getView().byId("retailST").getValue(),HistoricalOwner:this.getView().byId("histOwn+
er").getValue(),PsaOwner:this.getView().byId("PsaOwner").getValue(),GeoCode:l};const i=`/PropertyMasterSet(Plant='${t}',LegacyPropertyNumber='${s}')`;this._oModel.update(i,r,{success:function(t){o.show(e.getView().getModel("i18n").getResourceBundle().get+
Text("successMsg"));e.getOwnerComponent.hasChanges=false;e._oBusyDialog.close()},error:function(t){o.show(e.getView().getModel("i18n").getResourceBundle().getText("errorMsg"));e._oBusyDialog.close()}})}else{this._oBusyDialog.close();o.show("Please Fill a+
ll mandatory fields")}}})});                                                                                                                                                                                                                                   
//# sourceMappingURL=BasicDetails.controller.js.map                                                                                                                                                                                                            