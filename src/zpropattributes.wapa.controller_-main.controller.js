sap.ui.define(["sap/ui/core/mvc/Controller","sap/m/BusyDialog","sap/ui/model/json/JSONModel","sap/ui/core/Fragment","sap/m/MessageToast","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/model/FilterType"],function(e,t,i,o,s,l,a,n){"use strict"+
;return e.extend("com.publicstorage.prop.zpropattributes.controller.Main",{onInit:function(){this._oModel=sap.ui.getCore().getModel("mainModel");this._oBusyDialog=new t;this.readHelpDataSet()},readHelpDataSet:function(){const e=this;this._oBusyDialog.ope+
n();var t=new sap.ui.model.Filter("Action","EQ","KEY_F4");e._oModel.read(`/HelpDataSet`,{filters:[t],success:function(t){e._oBusyDialog.close();const o=t.results.filter((e,i)=>i===t.results.findIndex(t=>e.Keyfield===t.Keyfield));const s=new i(o);e.getVie+
w().setModel(s,"helpModel");sap.ui.getCore().setModel(s,"helpModel")},error:function(t){e._oBusyDialog.close();s.show("Something went wrong with Service")}})},handleInputValueHelpOpen:function(e){const t=this;const i=this.getView();if(!this._pValueHelpF4+
){this._pValueHelpF4=o.load({id:i.getId(),name:"com.publicstorage.prop.zpropattributes.fragments.valuehelp",controller:this}).then(function(e){i.addDependent(e);return e})}this._oBusyDialog.open();this._pValueHelpF4.then(function(e){t._oBusyDialog.close(+
);e.open()})},onValueHelpDialogClose:function(e){let t=e.getParameter("selectedItem");let i=t.getBindingContext("helpModel").getObject().Keyfield;let o=t.getTitle();this.getView().byId("valueInput").setValue(o);e.getSource().getBinding("items").filter([]+
);if(!t){return}this.keyField=i;this.readTableData(i)},handleInputSuggestionItemSelected:function(e){const t=e.getSource().getValue().toUpperCase();this.keyField=t;this.readTableData(t)},readTableData:function(e){const t=this.byId("idCustomValueHelpTable+
");const o=this.byId("illusSection");const l=this;var a=new sap.ui.model.Filter("Keyfield","EQ",e);this._oBusyDialog.open();l._oModel.read(`/HelpDataSet`,{filters:[a],success:function(e){l._oBusyDialog.close();const s=new i(e.results);l.byId("objSection"+
).setTitle(`Property Attributes for ${e.results[0].Keyfield}`);l.byId("objSection").setTitleLevel("H2");l.getView().setModel(s,"oTabModel");sap.ui.getCore().setModel(s,"oTabModel");l.getView().getModel("oTabModel").refresh();o.setVisible(false);t.bindAgg+
regation("items",{path:"oTabModel>/",template:new sap.m.ColumnListItem({cells:[new sap.m.Input({value:"{oTabModel>Code}",change:[l.onChangeNew,l],enabled:false}),new sap.m.Input({value:"{oTabModel>Description}",change:[l.onChangeNew,l]}),new sap.m.Button+
({icon:"sap-icon://delete",type:"Reject",press:l.deleteRecord.bind(l)})]})});if(e.results.length){o.setVisible(false);l.byId("idSave").setEnabled(true)}else{o.setVisible(true);l.byId("idSave").setEnabled(false)}},error:function(e){l._oBusyDialog.close();+
s.show("Something went wrong with Service")}})},deleteRecord:function(e){const t=this;const i=e.getSource().getBindingContext("oTabModel").getObject();const o=i.Keyfield;const l=i.Code;const a=`/HelpDataSet(Keyfield='${o}',Code='${l}')`;this._oModel.remo+
ve(a,{method:"DELETE",success:function(e){s.show("Record Deleted Successfully");sap.ui.getCore().getModel("oTabModel").refresh();t.readTableData(o)},error:function(e){s.show("Something went wrong with the Deletion")}})},onValueHelpDialogSearchCode:functi+
on(e){let t=e.getParameter("value");let i=new l("Keyfield",a.Contains,t);var o=new sap.ui.model.Filter([i]);e.getSource().getBinding("items").filter([o])},onSave:function(){const e=this;var t=[];var i=[];var o=new sap.ui.model.odata.ODataModel("/sap/opu/+
odata/sap/ZMM_PROP_MASTER_GLOBAL_HELP_SRV_01/",{json:true,defaultBindingMode:sap.ui.model.BindingMode.TwoWay,useBatch:true});this.getView().setModel(o,"tmpModel");var l=this.getView().byId("idCustomValueHelpTable");l.getItems().forEach(function(e){if(e.i+
sNewRow||e.isModified){i.push(e)}});if(i?.length){this._oBusyDialog.open();i.forEach(function(e){var i=e.getCells()[0].getValue();var l=e.getCells()[1].getValue();var a={Keyfield:this.keyField,Code:i,Description:l};var n=e.isNewRow?"POST":"PUT";if(e.isNe+
wRow){if(a.Code===""){this._oBusyDialog.close();return s.show("Code number cannot be blank")}}var d=e.isNewRow?"/HelpDataSet":`/HelpDataSet(Keyfield='${a.Keyfield}',Code='${a.Code}')`;var u=o.createBatchOperation(d,n,a);t.push(u)}.bind(this));o.addBatchC+
hangeOperations(t);o.submitBatch(function(t,o){e._oBusyDialog.close();if(o.statusCode===202){e.readTableData(e.keyField);i.forEach(function(e){e.isNewRow=false;e.isModified=false});s.show("Record Updated Successfully")}}.bind(this),function(t){e._oBusyDi+
alog.close();s.show("Something went wrong with the service")})}else{s.show("There is Nothing to Save")}},onAdd:function(e){var t=new sap.m.ColumnListItem({cells:[new sap.m.Input({change:[this.onChangeNew,this]}),new sap.m.Input({change:[this.onChangeNew,+
this]}),new sap.m.Button({icon:"sap-icon://delete",type:"Reject",press:[this.remove,this]})]});t.isNewRow=true;var i=this.getView().byId("idCustomValueHelpTable");i.insertItem(t,0);if(i.getItems().length>0){this.getView().byId("illusSection").setVisible(+
false);this.byId("idSave").setEnabled(true)}else{this.getView().byId("illusSection").setVisible(true);this.byId("idSave").setEnabled(false)}},onChangeNew:function(e){var t=e.getSource();var i=t.getParent();i.isModified=true},addToUpdateQueue:function(e){+
if(!this._updateQueue){this._updateQueue=[]}this._updateQueue.push(e)},remove:function(e){var t=this.getView().byId("idCustomValueHelpTable");t.removeItem(e.getSource().getParent());if(t.getItems().length>0){this.getView().byId("illusSection").setVisible+
(false)}else{this.getView().byId("illusSection").setVisible(true)}}})});                                                                                                                                                                                       
//# sourceMappingURL=Main.controller.js.map                                                                                                                                                                                                                    