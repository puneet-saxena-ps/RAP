sap.ui.define(["com/public/storage/pao/utils/reusecontroller","sap/m/BusyDialog","sap/m/MessageToast","sap/ui/core/Fragment","sap/ui/model/json/JSONModel","com/public/storage/pao/utils/formatter","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/u+
i/model/FilterType"],function(e,t,i,o,n,s,l,a,r){"use strict";var p;return e.extend("com.public.storage.pao.controller.BUDetails",{formatter:s,onInit:function(){p=this;const e=this.getRouter();e.getRoute("buDetails").attachMatched(this._onRouteMatched,th+
is);this._oBusyDialog=new t;this.getView().addDependent(this._oBusyDialog);this.model=new n;this.model.setData({Active:"None",BusinessUnitType:"None",CustomerCode:"None",EntityType:"None",CombinedSurvivingNumber:"None",ATypeProperty:"None"});this.getView+
().setModel(this.model)},_onRouteMatched:function(e){const t=this.getRouter();this.getOwnerComponent.hasChanges=false;const i=this.getOwnerComponent().plant;if(i===undefined){return t.navTo("home")}const o=this.getOwnerComponent().LegacyPropertyNumber;th+
is._oModel=sap.ui.getCore().getModel("mainModel");const n=this;const s=e.getParameter("arguments");const l=this.getView();this._Plant=s.plant;this.readPropertyData(i,o);this.readBUType();n.readCustomerCode();n.readEntityType();n.readATypeProp();n.readAqu+
iredDeveloperTP();this.readActive()},_onValueHelpActive:function(e){const t=this;const i=this.getView();if(!this._pValueHelpActivey){this._pValueHelpActivey=o.load({id:i.getId(),name:"com.public.storage.pao.fragments.BUDetails.Active",controller:this}).t+
hen(function(e){i.addDependent(e);return e})}this._oBusyDialog.open();this._pValueHelpActivey.then(function(e){t._oBusyDialog.close();e.open()})},onValueHelpDialogSearchBuType:function(e){let t=e.getParameter("value");let i=new l("Description",a.Contains+
,t);let o=new l("Code",a.Contains,t);let n=new l({filters:[i,o],and:false});e.getSource().getBinding("items").filter([n])},onValueHelpDialogSearchCCcode:function(e){let t=e.getParameter("value");let i=new l("Description",a.Contains,t);let o=new l("Code",+
a.Contains,t);let n=new l({filters:[i,o],and:false});e.getSource().getBinding("items").filter([n])},onValueHelpDialogSearchEntityType:function(e){let t=e.getParameter("value");let i=new l("Description",a.Contains,t);let o=new l("Code",a.Contains,t);let n+
=new l({filters:[i,o],and:false});e.getSource().getBinding("items").filter([n])},onValueHelpDialogSearchCombinedSno:function(e){let t=e.getParameter("value");let i=new l("Name2",a.Contains,t);e.getSource().getBinding("items").filter([i])},onValueHelpDial+
ogSearchAtypeProp:function(e){let t=e.getParameter("value");let i=new l("Description",a.Contains,t);let o=new l("Code",a.Contains,t);let n=new l({filters:[i,o],and:false});e.getSource().getBinding("items").filter([n])},onValueHelpDialogSearchActive:funct+
ion(e){let t=e.getParameter("value");let i=new l("Description",a.Contains,t);let o=new l("Code",a.Contains,t);let n=new l({filters:[i,o],and:false});e.getSource().getBinding("items").filter([n])},onValueHelpDialogSearchAquiredTp:function(e){let t=e.getPa+
rameter("value");let i=new l("Description",a.Contains,t);let o=new l("Code",a.Contains,t);let n=new l({filters:[i,o],and:false});e.getSource().getBinding("items").filter([n])},_onValueHelpBUnit:function(e){this.getOwnerComponent.hasChanges=true;const t=t+
his;const i=this.getView();if(!this._pValueHelpBUnit){this._pValueHelpBUnit=o.load({id:i.getId(),name:"com.public.storage.pao.fragments.BUDetails.Businessunit",controller:this}).then(function(e){i.addDependent(e);return e})}this._pValueHelpBUnit.then(fun+
ction(e){e.open()})},_onValueHelpActive:function(e){this.getOwnerComponent.hasChanges=true;const t=this;const i=this.getView();if(!this._pValueHelpActive){this._pValueHelpActive=o.load({id:i.getId(),name:"com.public.storage.pao.fragments.BUDetails.Active+
",controller:this}).then(function(e){i.addDependent(e);return e})}this._pValueHelpActive.then(function(e){e.open()})},_onValueHelpCustCode:function(e){this.getOwnerComponent.hasChanges=true;const t=this;const i=this.getView();if(!this._pValueHelpCustCode+
){this._pValueHelpCustCode=o.load({id:i.getId(),name:"com.public.storage.pao.fragments.BUDetails.Customercode",controller:this}).then(function(e){i.addDependent(e);return e})}this._oBusyDialog.open();this._pValueHelpCustCode.then(function(e){t._oBusyDial+
og.close();e.open()})},_onValueHelpEntityType:function(e){this.getOwnerComponent.hasChanges=true;const t=this;const i=this.getView();if(!this._pValueHelpEntityType){this._pValueHelpEntityType=o.load({id:i.getId(),name:"com.public.storage.pao.fragments.BU+
Details.Entitytype",controller:this}).then(function(e){i.addDependent(e);return e})}this._oBusyDialog.open();this._pValueHelpEntityType.then(function(e){t._oBusyDialog.close();e.open()})},_onValueHelpComSurvNumber:function(e){this.getOwnerComponent.hasCh+
anges=true;const t=this;const i=this.getView();if(!this._pValueHelpComSurvNumber){this._pValueHelpComSurvNumber=o.load({id:i.getId(),name:"com.public.storage.pao.fragments.BUDetails.Comsurvivingnumber",controller:this}).then(function(e){i.addDependent(e)+
;return e})}this._oBusyDialog.open();this._pValueHelpComSurvNumber.then(function(e){t._oBusyDialog.close();e.open()})},_onValueHelpComATypeProp:function(e){this.getOwnerComponent.hasChanges=true;const t=this;const i=this.getView();if(!this._pValueHelpTyp+
eProp){this._pValueHelpTypeProp=o.load({id:i.getId(),name:"com.public.storage.pao.fragments.BUDetails.ATypeProperty",controller:this}).then(function(e){i.addDependent(e);return e})}this._oBusyDialog.open();this._pValueHelpTypeProp.then(function(e){t._oBu+
syDialog.close();e.open()})},_onValueHelpComThirdParty:function(){this.getOwnerComponent.hasChanges=true;const e=this;const t=this.getView();if(!this._pValueHelpThirdParty){this._pValueHelpThirdParty=o.load({id:t.getId(),name:"com.public.storage.pao.frag+
ments.BUDetails.AquiredThirdParty",controller:this}).then(function(e){t.addDependent(e);return e})}this._oBusyDialog.open();this._pValueHelpThirdParty.then(function(t){e._oBusyDialog.close();t.open()})},onValueHelpDialogClose:function(e){let t=e.getParam+
eter("selectedItem");let i=e.getSource().getTitle();if(!t){return}let o=t.getDescription();let n=t.getTitle();if(i==="Business Unit"){this.getView().getModel("plantBasicDetailsModel").setProperty("/BusinessUnitType",`(${n}) ${o}`);this.getView().getModel+
("plantBasicDetailsModel").setProperty("/bTypeDesc",`${o}`)}else if(i==="Customer Code"){this.getView().getModel("plantBasicDetailsModel").setProperty("/CustomerCode",`(${n}) ${o}`);this.getView().getModel("plantBasicDetailsModel").setProperty("/custCode+
Desc",`${o}`)}else if(i==="Active"){this.getView().getModel("plantBasicDetailsModel").setProperty("/Active",`(${n}) ${o}`);this.getView().getModel("plantBasicDetailsModel").setProperty("/ActiveDesc",`${o}`)}else if(i==="Entity Type"){this.getView().getMo+
del("plantBasicDetailsModel").setProperty("/EntityType",`(${n}) ${o}`);this.getView().getModel("plantBasicDetailsModel").setProperty("/entityTypeDesc",`${o}`)}else if(i==="Property Type Model"){this.getView().getModel("plantBasicDetailsModel").setPropert+
y("/ATypeProperty",`(${n}) ${o}`);this.getView().getModel("plantBasicDetailsModel").setProperty("/aTypeDesc",`${o}`)}else if(i==="Combined Surviving Number"){this.getView().getModel("plantBasicDetailsModel").setProperty("/CombinedSurvivingNumber",n)}else+
 if(i==="Aquired Third Party"){this.getView().getModel("plantBasicDetailsModel").setProperty("/AcquiredDevelopedThirdP",`(${n}) ${o}`);this.getView().getModel("plantBasicDetailsModel").setProperty("/aquiredTpDesc",`${o}`)}},onDetectChange:function(e){thi+
s.detectChanges()},onPressSaveBUDetails:function(){this._oBusyDialog.open();const e=this;let t=true;const o=this.getOwnerComponent().plant;const n=this.getOwnerComponent().LegacyPropertyNumber;let s=this.byId("active").getValue();var l="/(([^)]+))/";let +
a=this.byId("bType").getValue();let r=this.byId("cCode").getValue();let p=this.byId("entityType").getValue();let u=this.byId("combinedServ").getValue();let d=this.byId("atypeProp").getValue();let c=this.byId("bType").getValue();let g=this.byId("aquiredFr+
omTP").getValue();let h=this.getView().byId("trafficMonitoring").getSelectedKey();if(s===""||s===undefined){this.model.setProperty("/Active","Error")}else{this.model.setProperty("/Active","None")}if(a===""||a===undefined){this.model.setProperty("/Busines+
sUnitType","Error")}else{this.model.setProperty("/BusinessUnitType","None")}if(r===""||r===undefined){this.model.setProperty("/CustomerCode","Error")}else{this.model.setProperty("/CustomerCode","None")}if(p===""||p===undefined){this.model.setProperty("/E+
ntityType","Error")}else{this.model.setProperty("/EntityType","None")}if(d===""||d===undefined){this.model.setProperty("/ATypeProperty","Error")}else{this.model.setProperty("/ATypeProperty","None")}if(a===""||s===""||r===""||p===""||d===""){t=true}else{t+
=false}if(t===false){const t={Active:s,BusinessUnitType:c,CustomerCode:r,EntityType:p,CombinedSurvivingNumber:u,Note1:this.getView().byId("note1").getValue(),Note2:this.getView().byId("note2").getValue(),Note3:this.getView().byId("note3").getValue(),ATyp+
eProperty:d,BillBoard:this.getView().byId("bill").getSelectedKey(),Comercial:this.getView().byId("comm").getSelectedKey(),CellTower:this.getView().byId("cell").getSelectedKey(),Solar:this.getView().byId("solar").getSelectedKey(),AcquiredFrom:this.getView+
().byId("aquiredFrom").getValue(),AcquiredDevelopedThirdP:g,Psd:this.getView().byId("psd").getValue(),TrafficMonitoring:h};const l=`/PropertyMasterSet(Plant='${o}',LegacyPropertyNumber='${n}')`;this._oModel.update(l,t,{success:function(t){e._oBusyDialog.+
close();e.getOwnerComponent.hasChanges=false;i.show(e.getView().getModel("i18n").getResourceBundle().getText("successMsg"))},error:function(t){e._oBusyDialog.close();i.show(e.getView().getModel("i18n").getResourceBundle().getText("errorMsg"))}})}else{thi+
s._oBusyDialog.close();i.show("Fill in all mandatory fields")}}})});                                                                                                                                                                                           
//# sourceMappingURL=BUDetails.controller.js.map                                                                                                                                                                                                               