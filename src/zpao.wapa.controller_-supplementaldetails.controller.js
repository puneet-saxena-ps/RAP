sap.ui.define(["com/public/storage/pao/utils/reusecontroller","sap/m/BusyDialog","sap/m/MessageToast","sap/ui/model/json/JSONModel","com/public/storage/pao/utils/formatter","sap/ui/core/Fragment","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/u+
i/model/FilterType"],function(e,t,i,o,s,l,a,n,r){"use strict";var u;return e.extend("com.public.storage.pao.controller.SupplementalDetails",{formatter:s,onInit:function(){u=this;const e=this.getRouter();e.getRoute("propSuppDeatils").attachMatched(this._o+
nRouteMatched,this);this._oBusyDialog=new t;this.getView().addDependent(this._oBusyDialog);this.model=new o;this.model.setData({JSONModel:"None"});this.getView().setModel(this.model)},_onRouteMatched:function(e){const t=this.getRouter();this.getOwnerComp+
onent.hasChanges=false;const i=this.getOwnerComponent().plant;if(i===undefined){return t.navTo("home")}const o=this.getOwnerComponent().LegacyPropertyNumber;this._oModel=sap.ui.getCore().getModel("mainModel");this.readConstructionCode();this.readProperty+
Data(i,o)},_onValueHelpConstructionCode:function(e){this.getOwnerComponent.hasChanges=true;this.selectedField=e.getSource().getCustomData()[0].getValue();const t=this;const i=this.getView();if(!this._pValueHelpClimateControl){this._pValueHelpClimateContr+
ol=l.load({id:i.getId(),name:"com.public.storage.pao.fragments.Supplemental.ConstructionCode",controller:this}).then(function(e){i.addDependent(e);return e})}this._oBusyDialog.open();this._pValueHelpClimateControl.then(function(e){t._oBusyDialog.close();+
e.open()})},onDetectChange:function(e){this.detectChanges()},onValueHelpDialogClose:function(e){let t=e.getParameter("selectedItem");let i=e.getSource().getTitle();if(!t){return}let o=t.getDescription();let s=t.getTitle();if(i==="Construction Code"&&this+
.selectedField==="constCode"){this.getView().getModel("plantBasicDetailsModel").setProperty("/ConstructionCode",`(${s}) ${o}`)}if(i==="Construction Code"&&this.selectedField==="constCode2"){this.getView().getModel("plantBasicDetailsModel").setProperty("/+
ConstructionCode2",`(${s}) ${o}`)}if(i==="Climate Control"){this.getView().getModel("plantBasicDetailsModel").setProperty("/ClimateControl",`(${s}) ${o}`)}if(i==="Year Built"){this.getView().getModel("plantBasicDetailsModel").setProperty("/YearBuilt",`${+
s}`)}},_onValueHelpYearBuild:function(e){this.getOwnerComponent.hasChanges=true;const t=this;const i=this.getView();if(!this._pValueHelpYearBuilt){this._pValueHelpYearBuilt=l.load({id:i.getId(),name:"com.public.storage.pao.fragments.Supplemental.YearBuil+
t",controller:this}).then(function(e){i.addDependent(e);return e})}this._oBusyDialog.open();this._pValueHelpYearBuilt.then(function(e){t._oBusyDialog.close();e.open()})},onValueHelpDialogYBuild:function(e){let t=e.getParameter("value");let i=new a("year"+
,n.Contains,t);e.getSource().getBinding("items").filter([i])},onValueHelpDialogSearchCC:function(e){let t=e.getParameter("value");let i=new a("Description",n.Contains,t);let o=new a("Code",n.Contains,t);let s=new a({filters:[i,o],and:false});e.getSource(+
).getBinding("items").filter([s])},onPressSaveSuppDetails:function(){this._oBusyDialog.open();const e=this.getOwnerComponent().plant;const t=this;const o=this.getOwnerComponent().LegacyPropertyNumber;var s=true;let l="T00:00:00";let a=this.byId("floodeff+
date").getValue().split(".").reverse().join("-");let n=sap.ui.core.format.DateFormat.getDateInstance({pattern:"yyyy-MM-dd"}).format(new Date(a))+l;a=n==="T00:00:00"?null:n;let r=this.getView().byId("apart").getSelectedKey();let u=this.byId("year").getVal+
ue();let g=this.byId("officeCount").getValue();let d=this.byId("restRoomCount").getValue();if(r===""){this.model.setProperty("/Apartments","Error")}else{this.model.setProperty("/Apartments","None")}if(r===""){s=true}else{s=false}if(s===false){const s={Lo+
ckers:this.getView().byId("lock").getSelectedKey(),LargeTruckAccess:this.getView().byId("truck").getSelectedKey(),FurnitureDollies:this.getView().byId("furniture").getSelectedKey(),Basement:this.getView().byId("base").getSelectedKey(),HandTrucks:this.get+
View().byId("hand").getSelectedKey(),Carts:this.getView().byId("cart").getSelectedKey(),YearBuilt:u,CapIndexRisk:this.getView().byId("capIndex").getValue(),NumberOfBuildings:this.getView().byId("noOfBuild").getValue(),ConstructionCode:this.getView().byId+
("constCode").getValue(),NumberOfStories:this.getView().byId("noOfStories").getValue(),ConstructionCode2:this.getView().byId("constCode2").getValue(),LotSize:this.getView().byId("lotSize").getValue(),BuildingClassification:this.getView().byId("buildClass+
").getValue(),GrossSquareFootage:this.getView().byId("grossSQFoot").getValue(),FloodZone:this.getView().byId("floodzone").getSelectedKey(),MilesOfCostalWater25:this.getView().byId("tfmilesCoastWater").getValue(),Sprinkler:this.getView().byId("sprink").ge+
tSelectedKey(),SprinklerRemark:this.getView().byId("sprinkRem").getValue(),FireAlarm:this.getView().byId("fireAlarm").getSelectedKey(),FireAlarmRemarks:this.getView().byId("fireAlarmRemark").getValue(),BuglerAlarm:this.getView().byId("bugalarm").getSelec+
tedKey(),BuglerAlarmRemarks:this.getView().byId("bugAlarmRemark").getValue(),ParkingSpaces:this.getView().byId("park").getSelectedKey(),Elevators:this.getView().byId("elevater").getSelectedKey(),Apartments:r,SurvellianceCamera:this.getView().byId("camera+
").getSelectedKey(),SurvellianceCameraRemarks:this.getView().byId("surCamRemarks").getValue(),OfficeCount:g,RestroomCount:d,FloodInsEffDate:a};const l=`/PropertyMasterSet(Plant='${e}',LegacyPropertyNumber='${o}')`;this._oModel.update(l,s,{success:functio+
n(e){t._oBusyDialog.close();t.getOwnerComponent.hasChanges=false;i.show("Saved Successfully")},error:function(e){t._oBusyDialog.close();i.show("Something went wrong with Service")}})}else{this._oBusyDialog.close();i.show("Please Fill all mandatory fields+
")}}})});                                                                                                                                                                                                                                                      
//# sourceMappingURL=SupplementalDetails.controller.js.map                                                                                                                                                                                                     