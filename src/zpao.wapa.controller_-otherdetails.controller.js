sap.ui.define(["com/public/storage/pao/utils/reusecontroller","sap/m/BusyDialog","sap/m/MessageToast","sap/ui/core/Fragment","sap/ui/model/json/JSONModel","com/public/storage/pao/utils/formatter","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/u+
i/model/FilterType"],function(e,t,i,o,s,n,a,l,r){"use strict";var g;return e.extend("com.public.storage.pao.controller.OtherDetails",{formatter:n,onInit:function(){g=this;const e=this.getRouter();e.getRoute("propOtherDetails").attachMatched(this._onRoute+
Matched,this);this.getView().addDependent(this._oBusyDialog);this.model=new s;this.model.setData({KeyTrainingProfessional:"None"});this.getView().setModel(this.model)},_onRouteMatched:function(e){const i=this.getRouter();this.getOwnerComponent.hasChanges+
=false;const o=this.getOwnerComponent().plant;if(o===undefined){return i.navTo("home")}const s=this.getOwnerComponent().LegacyPropertyNumber;this._oModel=sap.ui.getCore().getModel("mainModel");this._oBusyDialog=new t;this.readPropertyData(o,s);this.readM+
arketClass()},onValueHelpDialogSearchMarketClass:function(e){let t=e.getParameter("value");let i=new a("Description",l.Contains,t);let o=new a("Code",l.Contains,t);let s=new a({filters:[i,o],and:false});e.getSource().getBinding("items").filter([s])},_onV+
alueHelpKeyTraining:function(e){const t=this;const i=this.getView();if(!this._pValueHelpDialogTraining){this._pValueHelpDialogTraining=o.load({id:i.getId(),name:"com.public.storage.pao.fragments.OtherDetails.Training",controller:this}).then(function(e){i+
.addDependent(e);return e})}this._oBusyDialog.open();this._pValueHelpDialogTraining.then(function(e){t._oBusyDialog.close();e.open()})},_onValueHelpMarketClass:function(){this.getOwnerComponent.hasChanges=true;const e=this;const t=this.getView();if(!this+
._pValueHelpDialogMarket){this._pValueHelpDialogMarket=o.load({id:t.getId(),name:"com.public.storage.pao.fragments.OtherDetails.Market",controller:this}).then(function(e){t.addDependent(e);return e})}this._oBusyDialog.open();this._pValueHelpDialogMarket.+
then(function(t){e._oBusyDialog.close();t.open()})},_onValueHelpLfSTatus:function(){this.getOwnerComponent.hasChanges=true;const e=this;const t=this.getView();if(!this._pValueLFSTage){this._pValueLFSTage=o.load({id:t.getId(),name:"com.public.storage.pao.+
fragments.OtherDetails.Lifecyclestatus",controller:this}).then(function(e){t.addDependent(e);return e})}this._oBusyDialog.open();this._pValueLFSTage.then(function(t){e._oBusyDialog.close();t.open()})},onDetectChange:function(e){this.detectChanges()},onVa+
lueHelpDialogClose:function(e){let t=e.getParameter("selectedItem");let i=e.getSource().getTitle();if(!t){return}let o=t.getDescription();let s=t.getTitle();if(i==="Market Class"){this.getView().getModel("plantBasicDetailsModel").setProperty("/MartketCla+
ss",`(${s}) ${o}`)}else if(i==="Training Proffesionals"){this.getView().getModel("plantBasicDetailsModel").setProperty("/KeyTraniningProfessional",`(${s}) ${o}`)}else if(i==="Life Cycle Stage"){this.getView().getModel("plantBasicDetailsModel").setPropert+
y("/LifecycleStage",`(${s}) ${o}`)}},onPressSaveOtherDetails:function(){this._oBusyDialog.open();const e=this;const t=this.getOwnerComponent().plant;const o=this.getOwnerComponent().LegacyPropertyNumber;let s=this.byId("keyTrain").getSelectedKey();let n=+
this.byId("mClass").getValue();let a=this.byId("riskScore").getSelectedItem().getText();let l=this.byId("riskRating").getSelectedItem().getText();let r=this.byId("cas").getSelectedKey();let g=this.byId("majorAquisition").getValue();let c=this.byId("lifec+
ycleStage").getValue();let u=true;if(s===""||s===undefined){this.model.setProperty("/KeyTrainingProfessional","Error");u=true}else{this.model.setProperty("/KeyTrainingProfessional","None");u=false}if(u===false){const u={MartketClass:n,KeyTraniningProfess+
ional:s,RiskScore:a,RiskRating:l,Cas:r,MajorAcqisitions:g,LifecycleStage:c};const h=`/PropertyMasterSet(Plant='${t}',LegacyPropertyNumber='${o}')`;this._oModel.update(h,u,{success:function(t){e._oBusyDialog.close();i.show("Saved Successfully");e.getOwner+
Component.hasChanges=false},error:function(t){e._oBusyDialog.close();i.show("Something went wrong with Service")}})}else{this._oBusyDialog.close();i.show("Please Fill all mandatory fields")}}})});                                                           
//# sourceMappingURL=OtherDetails.controller.js.map                                                                                                                                                                                                            